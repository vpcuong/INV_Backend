┌─────────────────────────────────────────────────────────────────────┐
│                          CLIENT REQUEST                              │
│  GET /themes?categoryId=123&minPrice=100&search=modern&page=1        │
└────────────────────────────┬────────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         NESTJS MIDDLEWARE                            │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              │
│  │ Validation   │→ │  Transform   │→ │   Guards     │              │
│  │ Pipe         │  │  Pipe        │  │  (Auth)      │              │
│  └──────────────┘  └──────────────┘  └──────────────┘              │
└────────────────────────────┬────────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         CONTROLLER LAYER                             │
│                       ThemeController                                │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │  @Get()                                                       │  │
│  │  findAll(                                                     │  │
│  │    @Query() filterDto: ThemeFilterDto,                       │  │
│  │    @Pagination() pagination: PaginationParams                │  │
│  │  )                                                            │  │
│  └───────────────┬───────────────────────────────────────────────┘  │
└──────────────────┼──────────────────────────────────────────────────┘
                   │
                   ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         SERVICE LAYER                                │
│                       ThemeService                                   │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │  async findAll(filters, pagination) {                         │  │
│  │    const result = await repository.findAllWithFilters(...)    │  │
│  │    return new PaginatedResponseDto(...)                       │  │
│  │  }                                                             │  │
│  └───────────────┬───────────────────────────────────────────────┘  │
└──────────────────┼──────────────────────────────────────────────────┘
                   │
                   ▼
┌─────────────────────────────────────────────────────────────────────┐
│                      REPOSITORY LAYER                                │
│                     ThemeRepository                                  │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │  async findAllWithFilters(filters, pagination) {              │  │
│  │    const where = filterBuilder.buildWhereClause(filters)      │  │
│  │    const orderBy = filterBuilder.buildOrderBy(...)            │  │
│  │    return await prisma.theme.findMany({ where, orderBy })     │  │
│  │  }                                                             │  │
│  └───────────────┬───────────────────────────────────────────────┘  │
└──────────────────┼──────────────────────────────────────────────────┘
                   │
        ┌──────────┴──────────┐
        │                     │
        ▼                     ▼
┌──────────────────┐   ┌──────────────────┐
│ FILTER BUILDER   │   │  QUERY BUILDER   │
│                  │   │                  │
│ buildWhereClause │   │  buildOrderBy    │
│ buildInclude     │   │  buildSelect     │
└────────┬─────────┘   └────────┬─────────┘
         │                      │
         └──────────┬───────────┘
                    │
                    ▼
┌─────────────────────────────────────────────────────────────────────┐
│                         DATABASE LAYER                               │
│  ┌──────────────────────────────────────────────────────────────┐   │
│  │                    Prisma / TypeORM                          │   │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐            │   │
│  │  │   themes   │  │ categories │  │   users    │            │   │
│  │  └────────────┘  └────────────┘  └────────────┘            │   │
│  └──────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────┘