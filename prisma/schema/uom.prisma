// UOM (Unit of Measure) management

model UOMClass {
  id         Int      @id @default(autoincrement())
  code       String   @unique
  name       String
  description String?
  sortOrder  Int      @default(0)
  isActive   Boolean  @default(true)

  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  createdBy  String?

  uoms       UOM[]
}

model UOM {
  id         Int      @id @default(autoincrement())
  code       String   @unique
  name       String
  description String?
  sortOrder  Int      @default(0)
  isActive   Boolean  @default(true)

  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  createdBy  String?

  classId    Int
  uomClass   UOMClass @relation(fields: [classId], references: [id])

  fromConversions UOMConversion[] @relation("FromUOM")
  toConversions   UOMConversion[] @relation("ToUOM")
  items           Item[]
  supplierItemPackages SupplierItemPackaging[]
}

model UOMConversion {
  id         Int      @id @default(autoincrement())

  fromUOMId  Int
  toUOMId    Int
  factor     Float     // ví dụ: 1 M = 100 CM → factor = 100

  isActive   Boolean   @default(true)
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  createdBy  String?

  fromUOM    UOM @relation("FromUOM", fields: [fromUOMId], references: [id])
  toUOM      UOM @relation("ToUOM", fields: [toUOMId], references: [id])
}
