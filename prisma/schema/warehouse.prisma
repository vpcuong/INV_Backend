model Warehouse {
  id        Int      @id @default(autoincrement())
  publicId  String   @unique @db.Char(26)
  code      String   @unique @db.VarChar(20)
  name      String   @db.VarChar(200)
  address   String?  @db.VarChar(500)
  status    String   @default("active")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // 1 - n
  items        WarehouseItem[]
  invTransFrom InvTransHeader[] @relation("InvTransFrom")
  invTransTo   InvTransHeader[] @relation("InvTransTo")

  @@index([code])
  @@index([status])
}

model WarehouseItem {
  id          Int      @id @default(autoincrement())
  warehouseId Int
  itemSkuId   Int
  quantity    Decimal  @default(0) @db.Decimal(18, 4)
  reservedQty Decimal  @default(0) @db.Decimal(18, 4)
  uomCode     String?  @db.VarChar(10)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  // Relations
  warehouse Warehouse @relation(fields: [warehouseId], references: [id], onDelete: Cascade)
  itemSku   ItemSKU   @relation(fields: [itemSkuId], references: [id])

  @@unique([warehouseId, itemSkuId])
  @@index([warehouseId])
  @@index([itemSkuId])
}
