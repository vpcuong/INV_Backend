generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

enum UserRole {
  USER
  ADMIN
  MANAGER
}

model User {
  id             Int            @id @default(autoincrement())
  userId         String         @unique @db.VarChar(50)
  email          String         @unique
  password       String
  name           String?
  role           UserRole       @default(USER)
  isActive       Boolean        @default(true)
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt

  refreshTokens  RefreshToken[]
}

model RefreshToken {
  id          Int      @id @default(autoincrement())
  tokenHash   String   @unique
  userId      Int
  expiresAt   DateTime
  createdAt   DateTime @default(now())

  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([expiresAt])
}
